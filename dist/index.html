<!DOCTYPE html>
<html lang="ja" itemscope="itemscope" itemtype="http://schema.org/WebPage">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link type="text/css" rel="stylesheet" href="/assets/css/demo.css">
		<link type="text/css" rel="stylesheet" href="/assets/css/modal.css">
		<script src="/assets/js/bundle/polyfill.js"></script>
		<title>plugin es6 Modal</title>
	</head>
	<body>
		<div class="wrapper">
			<header>
				<h1>
					plugin es6 Modal
				</h1>
			</header>
			<!-- /header -->
			<main class="content">
				<div>
					<button type="button" class="modalBtn">Click Me!! 1</button>
				</div>
				<div>
					<button type="button" class="modalBtn">Click Me!! 2</button>
				</div>
			</main>
			<!-- /.content -->
			<footer>
				<div class="copyright" id="copyright">
					<small>
						<span itemprop="copyrightYear">2017</span>&copy; <span itemprop="name">plugin es6 Modal</span> All Rights Reserved.<br>
						This software is released under the MIT License.
					</small>
				</div>
			</footer>
			<!-- / footer -->
		</div>
		<!-- /.wrapper -->
		<script
			src="//code.jquery.com/jquery-3.1.1.min.js"
			integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
			crossorigin="anonymous"></script>
		<script src="/assets/js/bundle/modal.js"></script>
		<script>
			/* global $ Modal */
			(function(){
				// You can also use bind of jquery.
				// var target = $('.modalBtn');
				var target = document.querySelectorAll('.modalBtn');

				// If modify loading elemnt.
				var loadingElement = `<img src="/assets/images/loading.gif">`;

				var modal = new PEModal({
					target: target,
					loadingElement: loadingElement
				});
				// or No option.
				// var modal = new Modal(btn_2);


				modal.onBefore = function(){
					console.log('onBefore');
				};

				// modal.onBeforeModal = function(){
				// 	console.log('onBeforeModal');
				// };

				modal.onModal = function(){
					console.log('onModal');
					return new Promise((resolve) => {
						setTimeout(function(){
							var content_inner = document.getElementById('pem__contentInner');
							content_inner.insertAdjacentHTML('beforeend', 'On Modal!');
							resolve(this.nextFlug = true);
						}, 1000);
					});
				};

				modal.onModalAfter = function(){
					console.log('onModalAfter');
				};
			})();
		</script>
	</body>
</html>