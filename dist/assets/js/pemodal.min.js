!function(n){function e(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return n[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var t={};e.m=n,e.c=t,e.p="",e(0)}([function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),i=function(){function n(e){t(this,n);var o={button:null,modalElement:null,insertElement:null,loadingElement:null,loadingIcon:null,target:null,onBefore:null,onBeforeModal:null,onModal:null,onCloseAfter:null};this.init(o,e)}return o(n,[{key:"init",value:function(n,e){if(!(e instanceof Object||Object.getPrototypeOf(e)===Object.prototype))return!1;this.options=n;for(var t in e)if(e.hasOwnProperty(t)){var o=Object.getOwnPropertyDescriptor(e,t);o.enumerable&&(this.options[t]=e[t])}this.checkOptions()}},{key:"checkOptions",value:function(){var n=this.options.button;if(null==n&&n instanceof Object!=!1)return console.warn("pem button undifined!"),!1;var e=this.options.target;e instanceof Object==0?this.options.target=null:void 0!=this.options.target.length&&(this.options.target=e[0]),this.options.loadingIcon=this.hasLoadingIcon(this.options.loadingIcon),this.options.loadingElement=this.hasLoadingElement(this.options.loadingElement,this.options.loadingIcon),this.options.modalElement=this.hasModalElement(this.options.modalElement,this.options.target),this.options.insertElement=this.hasInsertElement(this.options.insertElement);var t=this.options.onBefore;this.onBefore="function"==typeof t?t:function(){};var o=this.options.onBeforeModal;this.onBeforeModal="function"==typeof o?o:function(){};var i=this.options.onModal;this.onModal="function"==typeof i?i:function(){};var r=this.options.onCloseAfter;this.onCloseAfter="function"==typeof r?r:function(){},this.onIgnite()}},{key:"onIgnite",value:function(){function n(n,e){if(void 0!==n){if("function"!=typeof n.then)return new Promise(function(e,t){e(n())}).then(function(n){return e("boolean"==typeof n?void 0==e?!0:n:!0)}).catch(function(){return!1});n().then(function(n){return e(void 0==e?!0:n)}).catch(function(){return!1})}else if(void 0!==e)return!1}var e=this,t=document.body,o=this.options.target,i=this.options.loadingElement,r=this.options.modalElement,s=this.options.insertElement,l=null==r&&null!==o;new Promise(function(t,o){n(e.onBefore,function(n){n?t(n):o(new Error("error message"))})}).then(function(t){return new Promise(function(o,r){t?n(e.onBeforeModal,function(n){e.loading().showLoading(i),n?o(n):r(new Error("error message"))}):r(new Error("error message"))})}).then(function(i){return new Promise(function(a,u){if(i){if(l)o.setAttribute("style","opacity: 0; display: block; -webkit-transition: all .3s; transition: all .3s;");else if(t.insertAdjacentHTML("beforeend",r),null!==s){var c=document.getElementById("pem__contentInner");c.insertAdjacentHTML("beforeend",s)}t.classList.add("pem__open"),n(e.onModal,function(n){n?a(n):u(new Error("error message"))})}else u(new Error("error message"))})}).then(function(i){return new Promise(function(r,s){i?function(){e.loading().hideLoading();var i=void 0==o||null==o?document.getElementById("pem"):o;setTimeout(function(){l&&(i.style.opacity=1),i.classList.add("pem--activate")},1);var r=i.getElementsByClassName("pemClose"),s=!0,a=!1,u=void 0;try{for(var c,d=Array.from(r)[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){c.value.addEventListener("click",function(o){t.classList.remove("pem__open"),i.classList.remove("pem--activate"),l?(i.style.opacity=0,setTimeout(function(){i.style.display="none",n(e.onCloseAfter)},300)):setTimeout(function(){i.parentNode.removeChild(i),n(e.onCloseAfter)},300)})}}catch(n){a=!0,u=n}finally{try{!s&&d.return&&d.return()}finally{if(a)throw u}}var f=document.getElementById("pem__contentInner");null!==f&&f.addEventListener("click",function(n){n.stopPropagation()}),t.addEventListener("touchmove",function(n){t.classList.contains("pem__open")&&n.preventDefault()},{passive:!1})}():s(new Error("error message"))})}).catch(function(n){console.log(n);var t=document.getElementById("pem");null!==t&&t.parentNode.removeChild(t),e.loading().hideLoading()})}},{key:"hasModalElement",value:function(n,e){return null==n&&null==e&&(n='\n        <div id="pem" class="pem pemClose" role="dialog">\n          <div class="pem__wrap">\n            <div class="pem__body">\n              <div class="pem__content">\n                <div class="pem__close pemClose">\n                  <span>Ã—</span>\n                </div>\n                <div id="pem__contentInner" class="pem__contentInner">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>'),n}},{key:"hasInsertElement",value:function(n){return null!==n&&"[object String]"==={}.toString.call(n)&&0<n.length?n:null}},{key:"hasLoadingIcon",value:function(n){return void 0!=n&&null!=n||(n='<img src="/assets/images/loading.gif">'),n}},{key:"hasLoadingElement",value:function(n,e){return void 0!=n&&null!=n||(n='\n        <div id="pemLoading" class="pemLoading">\n          <div class="pemLoading__wrapper">\n              <div class="pemLoading__body">\n                '+e+"\n              </div>\n            </div>\n        </div>"),n}},{key:"loading",value:function(){return{showLoading:function(n){document.body.insertAdjacentHTML("beforeend",n);var e=document.getElementById("pemLoading");setTimeout(function(){null!==e&&e.classList.add("pemLoading--activate")},1)},hideLoading:function(){var n=document.getElementById("pemLoading");null!==n&&setTimeout(function(){n.classList.remove("pemLoading--activate"),setTimeout(function(){null!==n.parentNode&&n.parentNode.removeChild(n)},300)},300)}}}}]),n}();e.default=i,"undefined"!=typeof window&&!window.PEModal&&(window.PEModal=i)}]);