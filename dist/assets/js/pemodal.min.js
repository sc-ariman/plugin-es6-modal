!function(n){function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){var o,i,r;!function(t,l){i=[e],o=l,void 0!==(r="function"==typeof o?o.apply(e,i):o)&&(n.exports=r)}(0,function(n){"use strict";function e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var t=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),o=function(){function n(t){e(this,n);var o={addModalClass:null,button:null,modalElement:null,insertElement:null,loadingElement:null,loadingIcon:null,target:null,onBefore:null,onBeforeModal:null,onModal:null,onCloseAfter:null};this.init(o,t)}return t(n,[{key:"init",value:function(n,e){if(!(e instanceof Object||Object.getPrototypeOf(e)===Object.prototype))return!1;this.options=n;for(var t in e)if(e.hasOwnProperty(t)){var o=Object.getOwnPropertyDescriptor(e,t);o.enumerable&&(this.options[t]=e[t])}this.checkOptions()}},{key:"checkOptions",value:function(){var n=this.options.button;if(null==n&&n instanceof Object!=!1)return console.warn("pem button undifined!"),!1;var e=this.options.target;e instanceof Object==!1?this.options.target=null:void 0!=this.options.target.length&&(this.options.target=e[0]),this.options.addModalClass=this.hasAddModalClass(this.options.addModalClass),this.options.loadingIcon=this.hasLoadingIcon(this.options.loadingIcon),this.options.loadingElement=this.hasLoadingElement(this.options.loadingElement,this.options.loadingIcon),this.options.modalElement=this.hasModalElement(this.options.modalElement,this.options.target,this.options.addModalClass),this.options.insertElement=this.hasInsertElement(this.options.insertElement);var t=this.options.onBefore;this.onBefore="function"==typeof t?t:function(){};var o=this.options.onBeforeModal;this.onBeforeModal="function"==typeof o?o:function(){};var i=this.options.onModal;this.onModal="function"==typeof i?i:function(){};var r=this.options.onCloseAfter;this.onCloseAfter="function"==typeof r?r:function(){},this.onIgnite()}},{key:"onIgnite",value:function(){function n(n,e){if(void 0!==n){if("function"!=typeof n.then)return new Promise(function(e,t){e(n())}).then(function(n){return e("boolean"==typeof n?void 0==e?!0:n:!0)}).catch(function(){return!1});n().then(function(n){return e(void 0==e?!0:n)}).catch(function(){return!1})}else if(void 0!==e)return!1}var e=this,t=document.body,o=this.options.target,i=this.options.loadingElement,r=this.options.modalElement,l=this.options.insertElement,a=null==r&&null!==o;new Promise(function(t,o){n(e.onBefore,function(n){n?t(n):o(new Error("error message"))})}).then(function(t){return new Promise(function(o,r){t?n(e.onBeforeModal,function(n){e.loading().showLoading(i),n?o(n):r(new Error("error message"))}):r(new Error("error message"))})}).then(function(i){return new Promise(function(s,u){if(i){if(a)o.setAttribute("style","opacity: 0; display: block; -webkit-transition: all .3s; transition: all .3s;");else if(t.insertAdjacentHTML("beforeend",r),null!==l){var d=document.getElementById("pem__contentInner");d.insertAdjacentHTML("beforeend",l)}t.classList.add("pem__open"),n(e.onModal,function(n){n?s(n):u(new Error("error message"))})}else u(new Error("error message"))})}).then(function(i){return new Promise(function(r,l){i?function(){e.loading().hideLoading();var i=void 0==o||null==o?document.getElementById("pem"):o;setTimeout(function(){a&&(i.style.opacity=1),i.classList.add("pem--activate")},1);var r=document.getElementsByClassName("pemClose"),l=!0,s=!1,u=void 0;try{for(var d,c=Array.from(r)[Symbol.iterator]();!(l=(d=c.next()).done);l=!0){d.value.addEventListener("click",function(o){t.classList.remove("pem__open"),i.classList.remove("pem--activate"),a?(i.style.opacity=0,setTimeout(function(){i.style.display="none",n(e.onCloseAfter)},300)):setTimeout(function(){null!==i.parentNode&&(i.parentNode.removeChild(i),n(e.onCloseAfter))},300)})}}catch(n){s=!0,u=n}finally{try{!l&&c.return&&c.return()}finally{if(s)throw u}}var f=document.getElementById("pem__contentInner");null!==f&&f.addEventListener("click",function(n){n.stopPropagation()})}():l(new Error("error message"))})}).catch(function(n){console.warn(n);var t=document.getElementById("pem");null!==t&&t.parentNode.removeChild(t),e.loading().hideLoading()})}},{key:"hasAddModalClass",value:function(n){return null!==n&&"[object String]"==={}.toString.call(n)&&0<n.length?n:null}},{key:"hasModalElement",value:function(n,e,t){return null==n&&null==e&&(t=null!==t?t:"",n='\n        <div id="pem" class="pem pemClose '+t+'" role="dialog">\n          <div class="pem__wrap">\n            <div class="pem__body">\n              <div class="pem__content">\n                <div class="pem__close pemClose">\n                  <span>Ã—</span>\n                </div>\n                <div id="pem__contentInner" class="pem__contentInner">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>'),n}},{key:"hasInsertElement",value:function(n){if(n instanceof Object){var e="";if(null==n.length&&0<n.outerHTML.length)n=n.outerHTML;else if(0<n.length){var t=!0,o=!1,i=void 0;try{for(var r,l=Array.from(n)[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var a=r.value;e+=a.outerHTML}}catch(n){o=!0,i=n}finally{try{!t&&l.return&&l.return()}finally{if(o)throw i}}n=e}}return null!==n&&"[object String]"==={}.toString.call(n)&&0<n.length?n:null}},{key:"hasLoadingIcon",value:function(n){return void 0!=n&&null!=n||(n='<img src="/assets/images/loading.gif">'),n}},{key:"hasLoadingElement",value:function(n,e){return void 0!=n&&null!=n||(n='\n        <div id="pemLoading" class="pemLoading">\n          <div class="pemLoading__wrapper">\n              <div class="pemLoading__body">\n                '+e+"\n              </div>\n            </div>\n        </div>"),n}},{key:"loading",value:function(){return{showLoading:function(n){document.body.insertAdjacentHTML("beforeend",n);var e=document.getElementById("pemLoading");setTimeout(function(){null!==e&&e.classList.add("pemLoading--activate")},1)},hideLoading:function(){var n=document.getElementById("pemLoading");null!==n&&setTimeout(function(){n.classList.remove("pemLoading--activate"),setTimeout(function(){null!==n.parentNode&&n.parentNode.removeChild(n)},300)},300)}}}}]),n}();n.default=o,"undefined"!=typeof window&&!window.PEModal&&(window.PEModal=o)})}]);
//# sourceMappingURL=pemodal.min.js.map