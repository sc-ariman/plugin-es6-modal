
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})
([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=(factory),__WEBPACK_AMD_DEFINE_RESULT__=(typeof __WEBPACK_AMD_DEFINE_FACTORY__==='function'?(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)):__WEBPACK_AMD_DEFINE_FACTORY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof exports!=="undefined"){factory(exports);}else{var mod={exports:{}};factory(mod.exports);global.modal=mod.exports;}})(this,function(exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var PEModal=function(){function PEModal(option){_classCallCheck(this,PEModal);if(option instanceof Object||Object.getPrototypeOf(option)===Object.prototype){var target=option.target;var loadingElement=option.loadingElement;if(target instanceof Object||Object.getPrototypeOf(target)===Object.prototype){var targets=Array.from(target);if(targets.length==0||targets==void 0){console.warn('pem target undifined');return false;}
var loadingImage=void 0;if(loadingElement==void 0||loadingElement==null||loadingElement==''){loadingImage='<img src="/assets/images/loading.gif">';}else{loadingImage=loadingElement;}
var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=targets[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _target=_step.value;this.target=_target;this.onClick(_target,loadingImage);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}}}
this.nextFlug=true;return this;}
_createClass(PEModal,[{key:'onClick',value:function onClick(target,loadingImage){var _this2=this;var modalFrame='\n        <div class="pem" id="pem">\n          <div class="pem__wrap">\n            <div class="pem__body">\n              <div class="pem__content">\n                <div class="pem__close">\n                  <span>\xD7</span>\n                </div>\n                <div id="pem__contentInner" class="pem__contentInner">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>';target.addEventListener('click',function(event_1){var body=document.body;new Promise(function(resolve,reject){var onBefore=_this2.onBefore;checkPromise(onBefore,function(){var nextFlug=_this2.nextFlug;if(_this2.nextFlug){resolve(_this2.nextFlug);}else{reject(new Error('error message'));}});}).then(function(nextFlug){return new Promise(function(resolve,reject){if(nextFlug){var onBeforeModal=_this2.onBeforeModal;checkPromise(onBeforeModal,function(){_this2.loading().showLoading(loadingImage);if(_this2.nextFlug){resolve(_this2.nextFlug);}else{reject(new Error('error message'));}});}else{reject(new Error('error message'));}});}).then(function(nextFlug){return new Promise(function(resolve,reject){if(nextFlug){body.insertAdjacentHTML('beforeend',modalFrame);body.classList.add('pem__open');var onModal=_this2.onModal;checkPromise(onModal,function(){if(_this2.nextFlug){resolve(_this2.nextFlug);}else{reject(new Error('error message'));}});}else{reject(new Error('error message'));}});}).then(function(nextFlug){return new Promise(function(resolve,reject){if(nextFlug){(function(){_this2.loading().hideLoading();var modal=document.getElementById('pem');setTimeout(function(){modal.classList.add('pem--activate');},1);modal.addEventListener('click',function(event_2){var _this=event_2.currentTarget;_this.classList.remove('pem--activate');body.classList.remove('pem__open');setTimeout(function(){_this.parentNode.removeChild(_this);checkPromise(_this2.onModalAfter);},300);});var pem__contentInner=document.getElementById('pem__contentInner');pem__contentInner.addEventListener('click',function(event_3){event_3.stopPropagation();});body.addEventListener('touchmove',function(e){var hasClass=body.classList.contains('pem__open');if(hasClass){e.preventDefault();}},{passive:false});})();}else{reject(new Error('error message'));}});}).catch(function(error){var modal=document.getElementById('pem');modal.parentNode.removeChild(modal);_this2.loading().hideLoading();console.log(error);_this2.onError();});});function checkPromise(onFunc,func){if(onFunc!==void 0){if(typeof onFunc.then==='function'){onFunc().then(function(){if(func!==void 0){return func();}});}else{return new Promise(function(resolve){resolve(onFunc());}).then(function(){if(func!==void 0){return func();}});}}else{if(func!==void 0){return func();}}}}},{key:'onBefore',value:function onBefore(){}},{key:'onBeforeModal',value:function onBeforeModal(){}},{key:'onModal',value:function onModal(){}},{key:'onModalAfter',value:function onModalAfter(){}},{key:'onError',value:function onError(){var _this3=this;return new Promise(function(resolve){if(typeof _this3.onError==='function'){resolve(_this3.onError());}else{resolve();}});}},{key:'loading',value:function loading(){var obj={showLoading:function showLoading(loadingImage){if(loadingImage==void 0||loadingImage==null||loadingImage==''){loadingImage='\n            <img src="/assets/images/loading.gif">';}
var loadingElement='\n          <div class="pemLoading" id="pemLoading">\n            <div class="pemLoading__wrapper">\n                <div class="pemLoading__body">\n                  '+loadingImage+'\n                </div>\n              </div>\n          </div>';document.body.insertAdjacentHTML('beforeend',loadingElement);var loading=document.getElementById('pemLoading');setTimeout(function(){if(loading!==null){loading.classList.add('pemLoading--activate');}},1);},hideLoading:function hideLoading(){var loading=document.getElementById('pemLoading');if(loading!==null){setTimeout(function(){loading.classList.remove('pemLoading--activate');setTimeout(function(){loading.parentNode.removeChild(loading);},300);},300);}}};return obj;}}]);return PEModal;}();exports.default=PEModal;if(typeof window!='undefined'){!window.PEModal&&(window.PEModal=PEModal);}});}]);